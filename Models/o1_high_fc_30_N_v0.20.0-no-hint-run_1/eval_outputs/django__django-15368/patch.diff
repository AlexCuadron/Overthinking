diff --git a/django/db/models/query.py b/django/db/models/query.py
index f8d848e926..f2f9797d88 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -670,7 +670,7 @@ class QuerySet:
                 when_statements = []
                 for obj in batch_objs:
                     attr = getattr(obj, field.attname)
-                    if not isinstance(attr, Expression):
+                    if not hasattr(attr, 'resolve_expression'):
                         attr = Value(attr, output_field=field)
                     when_statements.append(When(pk=obj.pk, then=attr))
                 case_statement = Case(*when_statements, output_field=field)
diff --git a/migrations/0001_initial.py b/migrations/0001_initial.py
new file mode 100644
index 0000000000..c15a14e4cd
--- /dev/null
+++ b/migrations/0001_initial.py
@@ -0,0 +1,22 @@
+# Generated by Django 4.1.dev20220127175139 on 2025-01-14 01:23
+
+from django.db import migrations, models
+
+
+class Migration(migrations.Migration):
+
+    initial = True
+
+    dependencies = [
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='SelfRef',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('name', models.CharField(max_length=50)),
+                ('c8', models.CharField(max_length=50)),
+            ],
+        ),
+    ]
diff --git a/migrations/__init__.py b/migrations/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/reproduce_bulk_f_bug.py b/reproduce_bulk_f_bug.py
new file mode 100644
index 0000000000..f627478ba6
--- /dev/null
+++ b/reproduce_bulk_f_bug.py
@@ -0,0 +1,37 @@
+import os
+import django
+from django.conf import settings
+
+settings.configure(
+    SECRET_KEY='test',
+    DEBUG=True,
+    INSTALLED_APPS=[
+        'django.contrib.contenttypes',
+        'django.contrib.auth',
+        'testapp.apps.TestappConfig',
+    ],
+    DATABASES={
+        'default': {
+            'ENGINE': 'django.db.backends.sqlite3',
+            'NAME': ':memory:',
+        }
+    },
+    MIDDLEWARE=[],
+)
+
+django.setup()
+
+from django.core.management import call_command
+
+call_command('makemigrations', 'testapp', interactive=False, verbosity=1)
+call_command('migrate', interactive=False, verbosity=1)
+
+from testapp.models import SelfRef
+from django.db.models import F
+
+obj = SelfRef.objects.create(name='Hello', c8='Initial')
+obj.c8 = F('name')
+SelfRef.objects.bulk_update([obj], ['c8'])
+obj.refresh_from_db()
+
+print('After bulk_update, obj.c8 =', repr(obj.c8))
\ No newline at end of file
diff --git a/testapp/__init__.py b/testapp/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/testapp/apps.py b/testapp/apps.py
new file mode 100644
index 0000000000..dc24defcca
--- /dev/null
+++ b/testapp/apps.py
@@ -0,0 +1,4 @@
+from django.apps import AppConfig
+
+class TestappConfig(AppConfig):
+    name = 'testapp'
\ No newline at end of file
diff --git a/testapp/migrations/0001_initial.py b/testapp/migrations/0001_initial.py
new file mode 100644
index 0000000000..bc8bd42c48
--- /dev/null
+++ b/testapp/migrations/0001_initial.py
@@ -0,0 +1,22 @@
+# Generated by Django 4.1.dev20220127175139 on 2025-01-14 01:27
+
+from django.db import migrations, models
+
+
+class Migration(migrations.Migration):
+
+    initial = True
+
+    dependencies = [
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='SelfRef',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('name', models.CharField(max_length=50)),
+                ('c8', models.CharField(max_length=50)),
+            ],
+        ),
+    ]
diff --git a/testapp/migrations/__init__.py b/testapp/migrations/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/testapp/models.py b/testapp/models.py
new file mode 100644
index 0000000000..811dadb902
--- /dev/null
+++ b/testapp/models.py
@@ -0,0 +1,8 @@
+from django.db import models
+
+class SelfRef(models.Model):
+    name = models.CharField(max_length=50)
+    c8 = models.CharField(max_length=50)
+
+    class Meta:
+        app_label = 'testapp'
\ No newline at end of file
